<div align="center">

# ğŸ“¸ MO Gallery

**A modern, feature-rich photo gallery application with integrated backend**

ä¸€ä¸ªç°ä»£åŒ–çš„å›¾ç‰‡ç”»å»Šåº”ç”¨ï¼Œå‰åç«¯é›†æˆï¼Œæ”¯æŒå¤šç§éƒ¨ç½²æ–¹å¼å’Œå­˜å‚¨åç«¯

[![Next.js](https://img.shields.io/badge/Next.js-15-black?style=flat-square&logo=next.js)](https://nextjs.org/)
[![Hono](https://img.shields.io/badge/Hono-API-orange?style=flat-square)](https://hono.dev/)
[![Prisma](https://img.shields.io/badge/Prisma-ORM-2D3748?style=flat-square&logo=prisma)](https://www.prisma.io/)
[![Tailwind CSS](https://img.shields.io/badge/Tailwind-CSS-38B2AC?style=flat-square&logo=tailwind-css)](https://tailwindcss.com/)
[![License](https://img.shields.io/badge/License-MIT-green?style=flat-square)](LICENSE)

[English](#features) | [ä¸­æ–‡](#åŠŸèƒ½ç‰¹æ€§)

</div>

---

## âœ¨ Features

### ğŸ“· Photo Gallery
- **Multiple View Modes** - Grid, Masonry (waterfall), and Timeline views
- **EXIF Data Extraction** - Automatically extracts camera, lens, aperture, shutter speed, ISO, and more
- **Dominant Color Extraction** - Automatically extracts primary colors from images
- **Album Management** - Organize photos into albums
- **Batch Upload** - Upload multiple photos with progress tracking

### ğŸ“– Stories / Narratives
- Create photo stories by combining multiple images
- Rich text descriptions with Markdown support
- Beautiful story presentation layout

### ğŸ‘¥ Friend Links (They Page)
- Showcase your friends and their websites
- Customizable avatars and descriptions

### ğŸ’¬ Comment System
- Support for Linux DO OAuth authentication
- Comment moderation in admin panel
- Optional: Restrict comments to Linux DO users only

### ğŸ” Admin Dashboard
- Comprehensive photo management
- Album and story management
- Blog post editor with Markdown
- System settings configuration
- Comment moderation
- Activity logs

### ğŸŒ Internationalization
- Chinese (ä¸­æ–‡) and English support
- Easy to extend for more languages

### ğŸ¨ Theming
- Dark and Light mode support
- Smooth theme transitions
- System preference detection

### â˜ï¸ Multiple Storage Backends
- **Local Storage** - Store files on local filesystem
- **GitHub** - Use GitHub repository as storage
- **Cloudflare R2** - S3-compatible object storage

---

## åŠŸèƒ½ç‰¹æ€§

### ğŸ“· ç…§ç‰‡ç”»å»Š
- **å¤šç§è§†å›¾æ¨¡å¼** - å®«æ ¼ã€ç€‘å¸ƒæµã€æ—¶é—´çº¿è§†å›¾
- **EXIF ä¿¡æ¯æå–** - è‡ªåŠ¨æå–ç›¸æœºã€é•œå¤´ã€å…‰åœˆã€å¿«é—¨ã€ISO ç­‰ä¿¡æ¯
- **ä¸»è‰²è°ƒæå–** - è‡ªåŠ¨æå–å›¾ç‰‡ä¸»è‰²è°ƒ
- **ç›¸å†Œç®¡ç†** - å°†ç…§ç‰‡ç»„ç»‡åˆ°ç›¸å†Œä¸­
- **æ‰¹é‡ä¸Šä¼ ** - æ”¯æŒå¤šå›¾ä¸Šä¼ ï¼Œæ˜¾ç¤ºä¸Šä¼ è¿›åº¦

### ğŸ“– æ•…äº‹/å™äº‹
- å°†å¤šå¼ ç…§ç‰‡ç»„åˆæˆæ•…äº‹
- æ”¯æŒ Markdown å¯Œæ–‡æœ¬æè¿°
- ç²¾ç¾çš„æ•…äº‹å±•ç¤ºå¸ƒå±€

### ğŸ‘¥ å‹é“¾åŠŸèƒ½ï¼ˆThey é¡µé¢ï¼‰
- å±•ç¤ºæœ‹å‹åŠå…¶ç½‘ç«™
- å¯è‡ªå®šä¹‰å¤´åƒå’Œæè¿°

### ğŸ’¬ è¯„è®ºç³»ç»Ÿ
- æ”¯æŒ Linux DO OAuth è®¤è¯
- åå°è¯„è®ºå®¡æ ¸
- å¯é€‰ï¼šä»…é™ Linux DO ç”¨æˆ·è¯„è®º

### ğŸ” åå°ç®¡ç†ç³»ç»Ÿ
- å…¨é¢çš„ç…§ç‰‡ç®¡ç†
- ç›¸å†Œå’Œæ•…äº‹ç®¡ç†
- Markdown åšå®¢ç¼–è¾‘å™¨
- ç³»ç»Ÿè®¾ç½®é…ç½®
- è¯„è®ºå®¡æ ¸
- æ“ä½œæ—¥å¿—

### ğŸŒ å¤šè¯­è¨€æ”¯æŒ
- ä¸­æ–‡å’Œè‹±æ–‡æ”¯æŒ
- æ˜“äºæ‰©å±•æ›´å¤šè¯­è¨€

### ğŸ¨ ä¸»é¢˜åˆ‡æ¢
- æ·±è‰²/æµ…è‰²æ¨¡å¼
- å¹³æ»‘çš„ä¸»é¢˜è¿‡æ¸¡
- è·Ÿéšç³»ç»Ÿåå¥½

### â˜ï¸ å¤šç§å­˜å‚¨åç«¯
- **æœ¬åœ°å­˜å‚¨** - å­˜å‚¨åœ¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ
- **GitHub** - ä½¿ç”¨ GitHub ä»“åº“ä½œä¸ºå­˜å‚¨
- **Cloudflare R2** - S3 å…¼å®¹çš„å¯¹è±¡å­˜å‚¨

---

## ğŸ› ï¸ Tech Stack

| Category | Technology |
|----------|------------|
| **Framework** | Next.js 15 (App Router) |
| **API** | Hono.js |
| **Database ORM** | Prisma |
| **Styling** | Tailwind CSS 4 |
| **Animation** | Framer Motion |
| **Database** | SQLite / PostgreSQL |
| **Image Processing** | Sharp, ExifReader |
| **Authentication** | JWT, Linux DO OAuth |

---

## ğŸš€ Quick Start

### Prerequisites

- Node.js 18+
- pnpm (recommended) or npm
- PostgreSQL (production) or SQLite (development)

### Local Development

```bash
# Clone the repository
git clone https://github.com/yourusername/mo-gallery.git
cd mo-gallery

# Install dependencies
pnpm install

# Configure environment variables
cp .env.example .env
# Edit .env file with your settings

# Initialize database
pnpm run prisma:dev

# Start development server
pnpm run dev
```

Visit `http://localhost:3000` to see your gallery!

### Minimal Environment Variables

```env
# Database (SQLite for local development)
DATABASE_URL="file:./dev.db"
DIRECT_URL="file:./dev.db"

# JWT Secret (change in production!)
JWT_SECRET="your-secret-key"

# Admin credentials (for initial seed)
ADMIN_USERNAME="admin"
ADMIN_PASSWORD="admin123"
```

---

## âš™ï¸ Environment Variables

### Required

| Variable | Description | Example |
|----------|-------------|---------|
| `DATABASE_URL` | Database connection URL | `file:./dev.db` or PostgreSQL URL |
| `DIRECT_URL` | Direct database URL (for migrations) | Same as DATABASE_URL |
| `JWT_SECRET` | Secret key for JWT tokens | `your-secret-key` |

### Optional

| Variable | Description | Default |
|----------|-------------|---------|
| `ADMIN_USERNAME` | Admin username for seed | `admin` |
| `ADMIN_PASSWORD` | Admin password for seed | `admin123` |
| `NEXT_PUBLIC_ADMIN_LOGIN_URL` | Hidden admin login path | - |
| `SITE_TITLE` | Site title | `MO GALLERY` |
| `CDN_DOMAIN` | CDN domain for assets | - |

### Linux DO OAuth (Optional)

| Variable | Description |
|----------|-------------|
| `LINUXDO_CLIENT_ID` | OAuth Client ID |
| `LINUXDO_CLIENT_SECRET` | OAuth Client Secret |
| `LINUXDO_REDIRECT_URI` | Callback URL (e.g., `https://your-domain.com/login/callback`) |
| `LINUXDO_COMMENTS_ONLY` | Restrict comments to Linux DO users (`true`/`false`) |

---

## ğŸ³ Docker Deployment

### Using Docker Compose (Recommended)

```bash
# Start with PostgreSQL
docker-compose up -d

# View logs
docker-compose logs -f
```

### Manual Docker Build

```bash
# Build image
docker build -t mo-gallery .

# Run container
docker run -p 3000:3000 --env-file .env mo-gallery
```

---

## â–² Vercel Deployment

1. **Fork** this repository
2. **Import** the project in Vercel
3. **Configure** environment variables (see `.env.example`)
4. **Set** build command to `pnpm run build:vercel`
5. **Use** Neon or Supabase as your database

> âš ï¸ **Note**: Local storage is not supported on Vercel. Use GitHub or R2 storage instead.

### Database Options for Vercel

- **[Neon](https://neon.tech/)** - Serverless PostgreSQL (recommended)
- **[Supabase](https://supabase.com/)** - PostgreSQL with additional features
- **[PlanetScale](https://planetscale.com/)** - MySQL-compatible serverless database

---

## ğŸ“ Project Structure

```
mo-gallery-web/
â”œâ”€â”€ prisma/              # Database schema and migrations
â”‚   â””â”€â”€ schema.prisma    # Prisma model definitions
â”œâ”€â”€ server/lib/          # Server-side utilities
â”‚   â”œâ”€â”€ db.ts            # Prisma client
â”‚   â”œâ”€â”€ jwt.ts           # JWT utilities
â”‚   â”œâ”€â”€ exif.ts          # EXIF extraction
â”‚   â”œâ”€â”€ colors.ts        # Dominant color extraction
â”‚   â””â”€â”€ storage/         # Storage abstraction layer
â”‚       â”œâ”€â”€ types.ts     # Interface definitions
â”‚       â”œâ”€â”€ factory.ts   # Factory function
â”‚       â”œâ”€â”€ local.ts     # Local storage
â”‚       â”œâ”€â”€ github.ts    # GitHub storage
â”‚       â””â”€â”€ r2.ts        # R2 storage
â”œâ”€â”€ hono/                # API routes (Hono.js)
â”‚   â”œâ”€â”€ index.ts         # Route aggregation
â”‚   â”œâ”€â”€ auth.ts          # Authentication
â”‚   â”œâ”€â”€ photos.ts        # Photo management
â”‚   â”œâ”€â”€ albums.ts        # Album management
â”‚   â”œâ”€â”€ stories.ts       # Stories/Narratives
â”‚   â”œâ”€â”€ blogs.ts         # Blog posts
â”‚   â”œâ”€â”€ comments.ts      # Comments
â”‚   â”œâ”€â”€ friends.ts       # Friend links
â”‚   â”œâ”€â”€ settings.ts      # Settings
â”‚   â””â”€â”€ middleware/      # Middleware
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/             # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ api/         # API entry point
â”‚   â”‚   â”œâ”€â”€ admin/       # Admin dashboard
â”‚   â”‚   â”œâ”€â”€ gallery/     # Gallery page
â”‚   â”‚   â”œâ”€â”€ story/       # Story pages
â”‚   â”‚   â”œâ”€â”€ blog/        # Blog pages
â”‚   â”‚   â””â”€â”€ they/        # Friend links page
â”‚   â”œâ”€â”€ components/      # React components
â”‚   â”‚   â”œâ”€â”€ admin/       # Admin components
â”‚   â”‚   â”œâ”€â”€ gallery/     # Gallery components
â”‚   â”‚   â””â”€â”€ ui/          # Common UI components
â”‚   â”œâ”€â”€ contexts/        # React Context providers
â”‚   â”‚   â”œâ”€â”€ AuthContext.tsx
â”‚   â”‚   â”œâ”€â”€ ThemeContext.tsx
â”‚   â”‚   â”œâ”€â”€ LanguageContext.tsx
â”‚   â”‚   â””â”€â”€ SettingsContext.tsx
â”‚   â””â”€â”€ lib/             # Frontend utilities
â”‚       â”œâ”€â”€ api.ts       # API client
â”‚       â”œâ”€â”€ i18n.ts      # Internationalization
â”‚       â””â”€â”€ utils.ts
â””â”€â”€ public/              # Static assets
```

---

## ğŸ“ Development Commands

```bash
# Development
pnpm run dev           # Start development server
pnpm run build         # Build for production
pnpm run start         # Start production server
pnpm run lint          # Run ESLint

# Database
pnpm run prisma:dev      # Create and apply migrations (development)
pnpm run prisma:deploy   # Apply migrations (production)
pnpm run prisma:generate # Generate Prisma client
pnpm run prisma:seed     # Initialize admin account
pnpm run prisma:studio   # Open Prisma Studio
```

---

## ğŸ¤ Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit your changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

---

## ğŸ“„ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

---

<div align="center">

**Made with â¤ï¸ by MO Gallery Contributors**

[Report Bug](https://github.com/yourusername/mo-gallery/issues) Â· [Request Feature](https://github.com/yourusername/mo-gallery/issues)

</div>
